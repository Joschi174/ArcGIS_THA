{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/components/openCloseComponent.js"],
  "sourcesContent": ["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\n * v1.9.2\n */\nimport { readTask } from '@stencil/core/internal/client/index.js';\n\nfunction isOpen(component) {\n  return \"opened\" in component ? component.opened : component.open;\n}\nfunction emitImmediately(component, nonOpenCloseComponent = false) {\n  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n    ? component.onBeforeOpen()\n    : component.onBeforeClose();\n  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n    ? component.onOpen()\n    : component.onClose();\n}\n/**\n * Helper to determine globally set transition duration on the given openTransitionProp, which is imported and set in the @Watch(\"open\").\n * Used to emit (before)open/close events both for when the opacity transition is present and when there is none (transition-duration is set to 0).\n *\n * @example\n * import { onToggleOpenCloseComponent, OpenCloseComponent } from \"../../utils/openCloseComponent\";\n *\n * async componentWillLoad() {\n * // When component initially renders, if `open` was set we need to trigger on load as watcher doesn't fire.\n * if (this.open) {\n *    onToggleOpenCloseComponent(this);\n * }\n * @Watch(\"open\")\n * async toggleModal(value: boolean): Promise<void> {\n *    onToggleOpenCloseComponent(this);\n * }\n *\n * @param component - OpenCloseComponent uses `open` prop to emit (before)open/close.\n * @param nonOpenCloseComponent - OpenCloseComponent uses `expanded` prop to emit (before)open/close.\n */\nfunction onToggleOpenCloseComponent(component, nonOpenCloseComponent = false) {\n  readTask(() => {\n    if (component.transitionEl) {\n      const { transitionDuration: allDurations, transitionProperty: allProps } = getComputedStyle(component.transitionEl);\n      const allTransitionDurationsArray = allDurations.split(\",\");\n      const allTransitionPropsArray = allProps.split(\",\");\n      const openTransitionPropIndex = allTransitionPropsArray.indexOf(component.openTransitionProp);\n      const transitionDuration = allTransitionDurationsArray[openTransitionPropIndex] ??\n        /* Safari will have a single transition value if multiple props share it,\n        so we fall back to it if there's no matching prop duration */\n        allTransitionDurationsArray[0];\n      if (transitionDuration === \"0s\") {\n        emitImmediately(component, nonOpenCloseComponent);\n        return;\n      }\n      const fallbackTimeoutId = setTimeout(() => {\n        component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n        component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n        component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n        emitImmediately(component, nonOpenCloseComponent);\n      }, parseFloat(transitionDuration) * 1000);\n      component.transitionEl.addEventListener(\"transitionstart\", onStart);\n      component.transitionEl.addEventListener(\"transitionend\", onEndOrCancel);\n      component.transitionEl.addEventListener(\"transitioncancel\", onEndOrCancel);\n      function onStart(event) {\n        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n          clearTimeout(fallbackTimeoutId);\n          component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n            ? component.onBeforeOpen()\n            : component.onBeforeClose();\n        }\n      }\n      function onEndOrCancel(event) {\n        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n            ? component.onOpen()\n            : component.onClose();\n          component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n          component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n        }\n      }\n    }\n  });\n}\n\nexport { onToggleOpenCloseComponent as o };\n"],
  "mappings": ";;;;;AAOA,SAAS,OAAO,WAAW;AACzB,SAAO,YAAY,YAAY,UAAU,SAAS,UAAU;AAC9D;AACA,SAAS,gBAAgB,WAAW,wBAAwB,OAAO;AACjE,GAAC,wBAAwB,UAAU,UAAU,cAAc,IAAI,OAAO,SAAS,KAC3E,UAAU,aAAa,IACvB,UAAU,cAAc;AAC5B,GAAC,wBAAwB,UAAU,UAAU,cAAc,IAAI,OAAO,SAAS,KAC3E,UAAU,OAAO,IACjB,UAAU,QAAQ;AACxB;AAqBA,SAAS,2BAA2B,WAAW,wBAAwB,OAAO;AAC5E,WAAS,MAAM;AACb,QAAI,UAAU,cAAc;AAsB1B,UAAS,UAAT,SAAiB,OAAO;AACtB,YAAI,MAAM,iBAAiB,UAAU,sBAAsB,MAAM,WAAW,UAAU,cAAc;AAClG,uBAAa,iBAAiB;AAC9B,oBAAU,aAAa,oBAAoB,mBAAmB,OAAO;AACrE,WAAC,wBAAwB,UAAU,UAAU,cAAc,IAAI,OAAO,SAAS,KAC3E,UAAU,aAAa,IACvB,UAAU,cAAc;AAAA,QAC9B;AAAA,MACF,GACS,gBAAT,SAAuB,OAAO;AAC5B,YAAI,MAAM,iBAAiB,UAAU,sBAAsB,MAAM,WAAW,UAAU,cAAc;AAClG,WAAC,wBAAwB,UAAU,UAAU,cAAc,IAAI,OAAO,SAAS,KAC3E,UAAU,OAAO,IACjB,UAAU,QAAQ;AACtB,oBAAU,aAAa,oBAAoB,iBAAiB,aAAa;AACzE,oBAAU,aAAa,oBAAoB,oBAAoB,aAAa;AAAA,QAC9E;AAAA,MACF;AAtCA,YAAM,EAAE,oBAAoB,cAAc,oBAAoB,SAAS,IAAI,iBAAiB,UAAU,YAAY;AAClH,YAAM,8BAA8B,aAAa,MAAM,GAAG;AAC1D,YAAM,0BAA0B,SAAS,MAAM,GAAG;AAClD,YAAM,0BAA0B,wBAAwB,QAAQ,UAAU,kBAAkB;AAC5F,YAAM,qBAAqB,4BAA4B,uBAAuB;AAAA;AAAA,MAG5E,4BAA4B,CAAC;AAC/B,UAAI,uBAAuB,MAAM;AAC/B,wBAAgB,WAAW,qBAAqB;AAChD;AAAA,MACF;AACA,YAAM,oBAAoB,WAAW,MAAM;AACzC,kBAAU,aAAa,oBAAoB,mBAAmB,OAAO;AACrE,kBAAU,aAAa,oBAAoB,iBAAiB,aAAa;AACzE,kBAAU,aAAa,oBAAoB,oBAAoB,aAAa;AAC5E,wBAAgB,WAAW,qBAAqB;AAAA,MAClD,GAAG,WAAW,kBAAkB,IAAI,GAAI;AACxC,gBAAU,aAAa,iBAAiB,mBAAmB,OAAO;AAClE,gBAAU,aAAa,iBAAiB,iBAAiB,aAAa;AACtE,gBAAU,aAAa,iBAAiB,oBAAoB,aAAa;AAAA,IAmB3E;AAAA,EACF,CAAC;AACH;",
  "names": []
}
