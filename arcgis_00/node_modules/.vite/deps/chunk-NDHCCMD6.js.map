{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/components/interactive.js"],
  "sourcesContent": ["/*!\r\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\r\n * v1.9.2\r\n */\r\nimport { Build } from '@stencil/core/internal/client/index.js';\r\n\r\nfunction getUserAgentData() {\r\n  return navigator.userAgentData;\r\n}\r\nfunction getUserAgentString() {\r\n  if (!Build.isBrowser) {\r\n    return \"\";\r\n  }\r\n  const uaData = getUserAgentData();\r\n  return uaData?.brands\r\n    ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(\" \")\r\n    : navigator.userAgent;\r\n}\r\n\r\n// ⚠️ browser-sniffing is not a best practice and should be avoided ⚠️\r\nconst isFirefox = /firefox/i.test(getUserAgentString());\r\nconst interactiveElementToParent = isFirefox\r\n  ? new WeakMap()\r\n  : null;\r\nfunction interceptedClick() {\r\n  const { disabled } = this;\r\n  if (!disabled) {\r\n    HTMLElement.prototype.click.call(this);\r\n  }\r\n}\r\nfunction onPointerDown(event) {\r\n  const interactiveElement = event.target;\r\n  if (isFirefox && !interactiveElementToParent.get(interactiveElement)) {\r\n    return;\r\n  }\r\n  const { disabled } = interactiveElement;\r\n  if (disabled) {\r\n    // prevent click from moving focus on host\r\n    event.preventDefault();\r\n  }\r\n}\r\nconst nonBubblingWhenDisabledMouseEvents = [\"mousedown\", \"mouseup\", \"click\"];\r\nfunction onNonBubblingWhenDisabledMouseEvent(event) {\r\n  if (isFirefox && !interactiveElementToParent.get(event.target)) {\r\n    return;\r\n  }\r\n  const { disabled } = event.target;\r\n  // prevent disallowed mouse events from being emitted on the disabled host (per https://github.com/whatwg/html/issues/5886)\r\n  //⚠ we generally avoid stopping propagation of events, but this is needed to adhere to the intended spec changes above ⚠\r\n  if (disabled) {\r\n    event.stopImmediatePropagation();\r\n    event.preventDefault();\r\n  }\r\n}\r\nconst captureOnlyOptions = { capture: true };\r\n/**\r\n * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.\r\n *\r\n * This should be used in the `componentDidRender` lifecycle hook.\r\n *\r\n * **Notes**\r\n *\r\n * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.\r\n * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error\r\n *\r\n * @param component\r\n * @param hostIsTabbable\r\n */\r\nfunction updateHostInteraction(component, hostIsTabbable = false) {\r\n  if (component.disabled) {\r\n    component.el.setAttribute(\"tabindex\", \"-1\");\r\n    component.el.setAttribute(\"aria-disabled\", \"true\");\r\n    if (component.el.contains(document.activeElement)) {\r\n      document.activeElement.blur();\r\n    }\r\n    blockInteraction(component);\r\n    return;\r\n  }\r\n  restoreInteraction(component);\r\n  if (typeof hostIsTabbable === \"function\") {\r\n    component.el.setAttribute(\"tabindex\", hostIsTabbable.call(component) ? \"0\" : \"-1\");\r\n  }\r\n  else if (hostIsTabbable === true) {\r\n    component.el.setAttribute(\"tabindex\", \"0\");\r\n  }\r\n  else if (hostIsTabbable === false) {\r\n    component.el.removeAttribute(\"tabindex\");\r\n  }\r\n  else ;\r\n  component.el.removeAttribute(\"aria-disabled\");\r\n}\r\nfunction blockInteraction(component) {\r\n  component.el.click = interceptedClick;\r\n  addInteractionListeners(isFirefox ? getParentElement(component) : component.el);\r\n}\r\nfunction addInteractionListeners(element) {\r\n  if (!element) {\r\n    // this path is only applicable to Firefox\r\n    return;\r\n  }\r\n  element.addEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\r\n  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\r\n}\r\nfunction getParentElement(component) {\r\n  return interactiveElementToParent.get(component.el);\r\n}\r\nfunction restoreInteraction(component) {\r\n  delete component.el.click; // fallback on HTMLElement.prototype.click\r\n  removeInteractionListeners(isFirefox ? getParentElement(component) : component.el);\r\n}\r\nfunction removeInteractionListeners(element) {\r\n  if (!element) {\r\n    // this path is only applicable to Firefox\r\n    return;\r\n  }\r\n  element.removeEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\r\n  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\r\n}\r\n/**\r\n * This utility helps disable components consistently in Firefox.\r\n *\r\n * It needs to be called in `connectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\r\n *\r\n * @param component\r\n */\r\nfunction connectInteractive(component) {\r\n  if (!component.disabled || !isFirefox) {\r\n    return;\r\n  }\r\n  const parent = component.el.parentElement || component.el; /* assume element is host if it has no parent when connected */\r\n  interactiveElementToParent.set(component.el, parent);\r\n  blockInteraction(component);\r\n}\r\n/**\r\n * This utility restores interactivity to disabled components consistently in Firefox.\r\n *\r\n * It needs to be called in `disconnectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\r\n *\r\n * @param component\r\n */\r\nfunction disconnectInteractive(component) {\r\n  if (!isFirefox) {\r\n    return;\r\n  }\r\n  // always remove on disconnect as render or connect will restore it\r\n  interactiveElementToParent.delete(component.el);\r\n  restoreInteraction(component);\r\n}\r\n\r\nexport { connectInteractive as c, disconnectInteractive as d, getUserAgentString as g, updateHostInteraction as u };\r\n"],
  "mappings": "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",
  "names": []
}
